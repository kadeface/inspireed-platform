<template>
  <div class="flowchart-cell">
    <!-- æ•™å¸ˆç¼–è¾‘æ¨¡å¼ -->
    <div v-if="editable" class="flowchart-editor">
      <div class="editor-placeholder">
        <div class="placeholder-icon">ğŸ“Š</div>
        <h3 class="placeholder-title">æµç¨‹å›¾ç¼–è¾‘å™¨</h3>
        <p class="placeholder-text">
          æµç¨‹å›¾åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...
        </p>
        <div class="feature-list">
          <div class="feature-item">âœ… æ”¯æŒå¤šç§èŠ‚ç‚¹ç±»å‹ï¼ˆå¼€å§‹ã€è¿‡ç¨‹ã€å†³ç­–ã€ç»“æŸï¼‰</div>
          <div class="feature-item">âœ… æ‹–æ‹½å¼å¯è§†åŒ–ç¼–è¾‘</div>
          <div class="feature-item">âœ… è‡ªåŠ¨å¸ƒå±€</div>
          <div class="feature-item">âœ… å¯¼å‡ºä¸ºå›¾ç‰‡</div>
        </div>
        <p class="tech-note">
          æ¨èæŠ€æœ¯æ ˆ: Vue Flow æˆ– Mermaid.js
        </p>
      </div>
    </div>

    <!-- å­¦ç”ŸæŸ¥çœ‹æ¨¡å¼ -->
    <div v-else class="flowchart-viewer">
      <div class="viewer-placeholder">
        <div class="placeholder-icon">ğŸ“Š</div>
        <h3 class="placeholder-title">æµç¨‹å›¾æŸ¥çœ‹å™¨</h3>
        <p class="placeholder-text">
          {{ cell.content.nodes.length }} ä¸ªèŠ‚ç‚¹, {{ cell.content.edges.length }} ä¸ªè¿çº¿
        </p>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import type { FlowchartCell } from '../../types/cell'

interface Props {
  cell: FlowchartCell
  editable?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  editable: false,
})

const emit = defineEmits<{
  update: [cell: FlowchartCell]
}>()

// TODO: å®ç°æµç¨‹å›¾ç¼–è¾‘å’ŒæŸ¥çœ‹åŠŸèƒ½
// æ¨èä½¿ç”¨ @vue-flow/core åº“
</script>

<style scoped>
.flowchart-cell {
  @apply min-h-[400px];
}

.flowchart-editor,
.flowchart-viewer {
  @apply w-full h-full;
}

.editor-placeholder,
.viewer-placeholder {
  @apply flex flex-col items-center justify-center py-16 px-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-300;
}

.placeholder-icon {
  @apply text-6xl mb-4;
}

.placeholder-title {
  @apply text-2xl font-bold text-gray-800 mb-2;
}

.placeholder-text {
  @apply text-gray-600 text-center mb-6;
}

.feature-list {
  @apply space-y-2 mb-6;
}

.feature-item {
  @apply text-sm text-gray-700 flex items-center gap-2;
}

.tech-note {
  @apply text-xs text-gray-500 bg-white px-4 py-2 rounded-full;
}
</style>

