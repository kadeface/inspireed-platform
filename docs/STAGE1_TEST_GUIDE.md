# 阶段1功能测试指南

## 测试环境信息

### 访问地址
- **前端应用**: http://localhost:5173
- **后端API**: http://localhost:8000
- **API文档**: http://localhost:8000/docs

### 测试账号
- **管理员**: admin@inspireed.com / admin123
- **教研员**: researcher@inspireed.com / researcher123
- **教师**: teacher@inspireed.com / teacher123
- **学生**: student@inspireed.com / student123

---

## 🧪 测试清单

### 测试1：Toast通知系统 ✅

#### 目标
验证Toast通知能正常显示并自动消失

#### 步骤
1. 登录管理员账号
2. 进入"课程体系管理"
3. 尝试以下操作，观察Toast提示：
   - 启用/禁用学科 → 应显示绿色成功提示
   - 启用/禁用年级 → 应显示绿色成功提示
   - 尝试删除有教案的课程 → 应显示黄色警告提示

#### 预期结果
- ✅ Toast出现在右上角
- ✅ 3秒后自动消失
- ✅ 点击可以立即关闭
- ✅ 颜色正确（成功=绿色，错误=红色，警告=黄色）
- ✅ 文字清晰易读

#### 截图位置
📸 `测试截图/toast-通知系统.png`

---

### 测试2：资源列表展示 ✅

#### 目标
验证能看到章节下的资源列表

#### 步骤
1. 登录管理员账号
2. 进入"课程体系管理"
3. 展开一个学科（如：智能农业）
4. 展开一个年级（如：高一）
5. 展开一个课程
6. 点击章节前的 **▶** 按钮
7. 观察资源列表显示

#### 预期结果
- ✅ 点击▶变成▼，显示资源列表
- ✅ 如果有资源，显示资源卡片
- ✅ 如果无资源，显示"暂无资源"提示
- ✅ 资源卡片包含：
  - 图标（📄/🎥/📃/🔗）
  - 标题
  - 官方标签（如果是官方资源）
  - 文件大小
  - 上传时间
  - 下载次数
  - 操作按钮（下载、查看、删除）

#### 截图位置
📸 `测试截图/资源列表-有资源.png`
📸 `测试截图/资源列表-无资源.png`

---

### 测试3：上传资源 ✅

#### 目标
验证上传资源功能和资源列表自动更新

#### 前置条件
准备一个测试PDF文件（建议1-5MB）

#### 步骤
1. 展开课程和章节
2. 点击章节行的 **"📎 上传"** 按钮
3. 填写资源信息：
   - 标题：测试资源-智能农业教案
   - 描述：用于测试资源管理功能
   - 勾选"官方资源"
   - 勾选"允许下载"
4. 选择PDF文件
5. 点击"上传"
6. 等待上传完成

#### 预期结果
- ✅ 上传进度显示正常
- ✅ 上传成功显示Toast提示
- ✅ 对话框自动关闭
- ✅ 展开该章节，能看到新上传的资源
- ✅ 资源信息显示正确（标题、大小、时间等）
- ✅ 有"官方"标签

#### 截图位置
📸 `测试截图/上传资源-对话框.png`
📸 `测试截图/上传资源-成功.png`
📸 `测试截图/上传资源-列表更新.png`

---

### 测试4：下载资源 ✅

#### 目标
验证资源下载功能和下载次数统计

#### 步骤
1. 展开包含资源的章节
2. 记录当前下载次数（如：0次）
3. 点击资源的 **"下载"** 按钮
4. 确认浏览器开始下载
5. 刷新页面
6. 再次查看该资源的下载次数

#### 预期结果
- ✅ 点击下载后显示Toast提示"开始下载"
- ✅ 浏览器开始下载文件
- ✅ 文件名正确
- ✅ 刷新后下载次数+1
- ✅ 资源列表自动更新

#### 截图位置
📸 `测试截图/下载资源-before.png`
📸 `测试截图/下载资源-after.png`

---

### 测试5：删除资源 ✅

#### 目标
验证删除资源功能和列表自动更新

#### 步骤
1. 展开包含资源的章节
2. 点击某个资源的 **"删除"** 按钮
3. 在确认对话框点击"确定"
4. 等待删除完成

#### 预期结果
- ✅ 显示原生confirm确认对话框
- ✅ 删除成功显示绿色Toast提示
- ✅ 资源从列表中消失
- ✅ 如果删除后无资源，显示"暂无资源"

#### ⚠️ 注意事项
- 不要删除重要的官方资源！
- 建议删除测试上传的资源

#### 截图位置
📸 `测试截图/删除资源-确认.png`
📸 `测试截图/删除资源-成功.png`

---

### 测试6：添加章节 ✅

#### 目标
验证单个添加章节功能

#### 步骤
1. 展开一个课程
2. 点击 **"添加章节"** 按钮（紫色，在章节列表上方）
3. 填写章节信息：
   - 名称：测试章节-智能传感器
   - 代码：test-chapter-01
   - 描述：用于测试章节创建功能
   - 父章节：选择一个主章节（或留空作为主章节）
   - 排序：999
   - 勾选"是否启用"
4. 点击"保存"

#### 预期结果
- ✅ 保存成功显示绿色Toast提示"章节创建成功！"
- ✅ 章节列表自动刷新
- ✅ 新章节出现在列表中
- ✅ 信息显示正确
- ✅ 如果设置了父章节，显示为子章节（└─）

#### 截图位置
📸 `测试截图/添加章节-按钮.png`
📸 `测试截图/添加章节-对话框.png`
📸 `测试截图/添加章节-成功.png`

---

### 测试7：章节资源展开/折叠 ✅

#### 目标
验证章节资源的展开折叠交互

#### 步骤
1. 展开一个课程
2. 点击主章节前的 **▶** 按钮
3. 观察资源列表展开
4. 再次点击（现在变成▼）
5. 观察资源列表折叠
6. 对子章节重复上述操作

#### 预期结果
- ✅ 主章节和子章节都可以独立展开/折叠
- ✅ ▶ 表示折叠，▼ 表示展开
- ✅ 动画流畅
- ✅ 展开时加载资源列表
- ✅ 折叠时资源列表隐藏

#### 截图位置
📸 `测试截图/章节展开-主章节.png`
📸 `测试截图/章节展开-子章节.png`

---

### 测试8：批量导入章节 ✅

#### 目标
验证CSV批量导入章节功能仍然可用

#### 前置条件
使用项目根目录的 `智能农业课程目录.csv`

#### 步骤
1. 展开课程
2. 点击 **"📥 导入章节"** 按钮
3. 选择课程（智能农业课程）
4. 上传CSV文件
5. 点击"导入"

#### 预期结果
- ✅ 导入成功显示Toast提示
- ✅ 章节列表刷新
- ✅ CSV中的章节都显示在列表中
- ✅ 层级关系正确（主章节和子章节）

#### 截图位置
📸 `测试截图/批量导入-对话框.png`
📸 `测试截图/批量导入-成功.png`

---

### 测试9：Toast提示替换验证 ✅

#### 目标
确认所有alert都已替换为Toast

#### 操作列表
| 操作 | 原提示方式 | 新提示方式 | 状态 |
|------|----------|----------|------|
| 加载失败 | alert | Toast Error | ✅ |
| 学科禁用 | alert | Toast Success | ✅ |
| 年级禁用 | alert | Toast Success | ✅ |
| 课程保存 | alert | Toast Success | ✅ |
| 课程删除 | alert | Toast Success/Warning | ✅ |
| 资源上传 | alert | Toast Success | ✅ |
| 章节导入 | alert | Toast Success | ✅ |
| 章节保存 | alert | Toast Success | ✅ |
| 章节删除 | alert | Toast Success | ✅ |
| 数据加载中 | alert | Toast Warning | ✅ |

#### 验证方法
逐一执行上述操作，确认不会出现浏览器原生alert弹窗

---

## 🔍 高级测试

### 测试10：多资源上传（压力测试）

#### 步骤
1. 连续上传5个资源到同一章节
2. 观察性能和UI响应

#### 预期结果
- ✅ 每次上传都能成功
- ✅ Toast不会堆叠太多（自动消失）
- ✅ 资源列表正确显示所有资源
- ✅ 排序符合预期（按display_order和时间）

---

### 测试11：边界情况测试

#### 11.1 空章节资源展开
- 展开没有资源的章节
- 应显示"暂无资源"和引导文字

#### 11.2 删除最后一个资源
- 删除章节中唯一的资源
- 应显示"暂无资源"

#### 11.3 大文件上传
- 尝试上传接近100MB的文件
- 应能正常上传或提示大小限制

#### 11.4 特殊字符文件名
- 上传包含中文、空格、特殊字符的文件
- 应能正常处理

---

## 📋 测试结果记录表

### 基础功能测试

| 测试项 | 状态 | 问题描述 | 严重程度 |
|-------|------|---------|---------|
| Toast通知系统 | ⬜ | | |
| 资源列表展示 | ⬜ | | |
| 上传资源 | ⬜ | | |
| 下载资源 | ⬜ | | |
| 删除资源 | ⬜ | | |
| 添加章节 | ⬜ | | |
| 章节展开折叠 | ⬜ | | |
| 批量导入章节 | ⬜ | | |
| Toast提示替换 | ⬜ | | |

### 高级测试

| 测试项 | 状态 | 问题描述 | 严重程度 |
|-------|------|---------|---------|
| 多资源上传 | ⬜ | | |
| 空章节处理 | ⬜ | | |
| 删除最后资源 | ⬜ | | |
| 大文件上传 | ⬜ | | |
| 特殊字符处理 | ⬜ | | |

**说明**: 
- ✅ = 通过
- ❌ = 失败  
- ⚠️ = 部分通过
- ⬜ = 未测试

---

## 🐛 问题反馈模板

如果发现问题，请使用以下格式记录：

```
### 问题标题
[简短描述问题]

**测试项**: [对应的测试编号]
**严重程度**: [🔴高 / 🟡中 / 🟢低]
**复现步骤**:
1. 
2. 
3. 

**预期结果**:
[应该发生什么]

**实际结果**:
[实际发生了什么]

**截图/日志**:
[附上截图或错误日志]

**浏览器信息**:
- 浏览器: [Chrome/Firefox/Safari]
- 版本: [版本号]
- 操作系统: [macOS/Windows/Linux]
```

---

## 📸 测试截图目录结构

建议创建以下目录保存测试截图：

```
测试截图/
├── toast通知系统/
│   ├── success.png
│   ├── error.png
│   ├── warning.png
│   └── info.png
├── 资源管理/
│   ├── 资源列表-有资源.png
│   ├── 资源列表-无资源.png
│   ├── 上传资源-对话框.png
│   ├── 上传资源-成功.png
│   ├── 下载资源.png
│   └── 删除资源.png
├── 章节管理/
│   ├── 添加章节-按钮.png
│   ├── 添加章节-对话框.png
│   ├── 添加章节-成功.png
│   └── 批量导入.png
└── 问题截图/
    └── [问题相关截图]
```

---

## ⏱️ 预计测试时间

- **基础功能测试**: 30-45分钟
- **高级测试**: 15-20分钟
- **问题记录和整理**: 10-15分钟
- **总计**: 约1-1.5小时

---

## 🎯 测试重点

### 最重要的测试（必须通过）
1. ✅ Toast通知系统工作正常
2. ✅ 资源列表能正确显示
3. ✅ 上传资源功能可用
4. ✅ 下载和删除资源正常
5. ✅ 添加章节功能可用

### 次要测试（可以有小问题）
6. ✅ 展开折叠动画流畅
7. ✅ 空状态提示友好
8. ✅ 边界情况处理

---

## 📞 测试支持

如果测试过程中遇到问题：

1. **查看日志**
   ```bash
   tail -f logs/backend.log
   tail -f logs/frontend.log
   ```

2. **查看浏览器控制台**
   - 按 F12 打开开发者工具
   - 查看 Console 标签的错误信息
   - 查看 Network 标签的网络请求

3. **重启服务**
   ```bash
   ./restart.sh
   ```

4. **联系开发者**
   - 提供详细的问题描述
   - 附上截图和日志
   - 说明复现步骤

---

## ✅ 测试完成检查清单

测试完成后，请确认：

- [ ] 所有基础功能测试已完成
- [ ] 至少完成2个高级测试
- [ ] 发现的问题已记录
- [ ] 测试结果表已填写
- [ ] 关键功能的截图已保存
- [ ] 问题已反馈给开发者

---

**测试日期**: ___________  
**测试人员**: ___________  
**测试环境**: macOS / Chrome  
**测试结果**: 通过 / 部分通过 / 未通过

---

**祝测试顺利！** 🎉

如有任何问题，请随时反馈！

