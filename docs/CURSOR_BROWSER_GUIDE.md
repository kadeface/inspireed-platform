# Cursor 浏览器工具使用指南

> 在 Cursor AI 中使用浏览器自动化工具进行测试、调试和演示

**最后更新**: 2025-10-16  
**适用版本**: Cursor IDE with Playwright MCP

---

## 📖 目录

- [简介](#简介)
- [快速开始](#快速开始)
- [可用工具](#可用工具)
- [常用操作](#常用操作)
- [实战示例](#实战示例)
- [最佳实践](#最佳实践)
- [常见问题](#常见问题)

---

## 🎯 简介

Cursor 提供了两套浏览器自动化工具：

| 工具 | 特点 | 推荐度 |
|------|------|--------|
| **Browser Tools** | 需要手动打开 Cursor Browser | ⭐⭐⭐ |
| **Playwright** | 自动启动，功能强大 | ⭐⭐⭐⭐⭐ |

**本指南主要介绍 Playwright 工具**，因为它无需手动操作，更适合自动化场景。

---

## ⚡ 快速开始

### 基本用法

你只需要用**自然语言**告诉 AI 你想做什么，AI 会自动调用相应的浏览器工具。

#### 示例 1：打开页面
```
👤 你：用 playwright mcp 服务器打开 http://localhost:5173
🤖 AI：[自动调用 browser_navigate 工具]
```

#### 示例 2：登录系统
```
👤 你：用 playwright mcp 服务器导航到 http://localhost:5173，用 admin@inspireed.com / admin123 登录
🤖 AI：[自动完成：导航 → 填表 → 点击 → 验证]
```

#### 示例 3：复杂操作
```
👤 你：打开应用，用管理员登录，然后创建一个新课程
🤖 AI：[自动完成多步骤操作]
```

---

## 🛠️ 可用工具

### 核心工具

| 工具名称 | 功能 | 使用场景 |
|---------|------|---------|
| `browser_navigate` | 导航到指定 URL | 打开页面 |
| `browser_snapshot` | 获取页面结构快照 | 分析页面元素 |
| `browser_click` | 点击元素 | 按钮、链接 |
| `browser_type` | 输入文本 | 单个输入框 |
| `browser_fill_form` | 批量填写表单 | 登录、注册表单 |
| `browser_take_screenshot` | 截图 | 验证结果 |
| `browser_wait_for` | 等待页面变化 | 页面加载、动画 |

### 高级工具

| 工具名称 | 功能 | 使用场景 |
|---------|------|---------|
| `browser_select_option` | 选择下拉选项 | 下拉菜单 |
| `browser_hover` | 鼠标悬停 | 悬停菜单 |
| `browser_drag` | 拖拽元素 | 拖拽排序 |
| `browser_press_key` | 键盘操作 | 快捷键 |
| `browser_evaluate` | 执行 JavaScript | 自定义操作 |
| `browser_file_upload` | 文件上传 | 上传文件 |
| `browser_tabs` | 标签页管理 | 多标签操作 |

### 调试工具

| 工具名称 | 功能 | 使用场景 |
|---------|------|---------|
| `browser_console_messages` | 查看控制台日志 | 调试 JS 错误 |
| `browser_network_requests` | 查看网络请求 | 调试 API 调用 |
| `browser_handle_dialog` | 处理弹窗 | 确认框、提示框 |

---

## 📋 常用操作

### 1. 导航和页面操作

#### 打开页面
```
指令：打开 http://localhost:5173
指令：访问前端应用
指令：导航到登录页面
```

#### 刷新和返回
```
指令：刷新页面
指令：返回上一页
指令：前进到下一页
```

#### 截图
```
指令：截个图
指令：给当前页面截图
指令：截取整个页面的图片
```

---

### 2. 表单操作

#### 填写单个字段
```
指令：在搜索框输入 "数学"
指令：在用户名框填写 admin@inspireed.com
```

#### 填写完整表单
```
指令：用 admin@inspireed.com / admin123 登录
指令：注册新用户：用户名 teacher1，邮箱 teacher1@test.com
```

#### 选择下拉菜单
```
指令：选择年级为"高一"
指令：在学科下拉框选择"数学"
```

#### 勾选复选框
```
指令：勾选"显示已禁用项"
指令：选中"记住我"复选框
```

---

### 3. 点击操作

#### 点击按钮
```
指令：点击"登录"按钮
指令：点击"提交"
指令：点击页面右上角的"添加课程"
```

#### 点击链接
```
指令：点击"注册"链接
指令：打开"课程管理"页面
```

---

### 4. 等待和验证

#### 等待加载
```
指令：等待页面加载完成
指令：等待 2 秒
指令：等待看到"欢迎"文字
```

#### 验证内容
```
指令：检查页面是否显示"登录成功"
指令：确认控制台没有错误
指令：查看网络请求是否正常
```

---

## 🎮 实战示例

### 示例 1：登录系统

#### 简单版（推荐）
```
👤 指令：
导航到 http://localhost:5173，用 admin@inspireed.com / admin123 登录

🤖 AI 会自动：
1. 打开页面
2. 填写用户名
3. 填写密码
4. 点击登录按钮
5. 验证登录成功
6. 截图确认
```

#### 详细版（可选）
```
👤 指令：
1. 打开 http://localhost:5173
2. 在用户名框输入 admin@inspireed.com
3. 在密码框输入 admin123
4. 点击登录按钮
5. 截图

🤖 AI 会一步步执行
```

---

### 示例 2：创建课程

```
👤 指令：
打开应用，用管理员登录，然后：
1. 点击"添加课程"按钮
2. 填写课程名称为"高一数学"
3. 选择学科为"数学"
4. 选择年级为"高一"
5. 点击"保存"
6. 截图确认

🤖 AI 会自动完成所有步骤
```

---

### 示例 3：测试搜索功能

```
👤 指令：
用教师账号登录，然后：
1. 在搜索框输入"物理"
2. 等待搜索结果加载
3. 检查是否显示相关课程
4. 截图结果

🤖 AI 会完成搜索测试流程
```

---

### 示例 4：调试网络请求

```
👤 指令：
打开应用，登录后：
1. 打开课程列表页面
2. 查看网络请求
3. 检查是否有失败的 API 调用
4. 查看控制台错误

🤖 AI 会帮你分析问题
```

---

## 💡 最佳实践

### ✅ 推荐做法

#### 1. 使用自然语言
```
✅ 好："打开应用，用管理员登录"
❌ 差："调用 browser_navigate 和 browser_fill_form"
```

#### 2. 分步骤描述复杂操作
```
✅ 好：
登录系统，然后：
1. 进入课程管理
2. 创建新课程
3. 填写信息
4. 保存

❌ 差："做完所有事情"
```

#### 3. 明确等待时机
```
✅ 好："点击提交，等待页面跳转，然后截图"
❌ 差："点击提交，立即截图"（可能还在加载）
```

#### 4. 验证结果
```
✅ 好："登录后截图确认"
❌ 差："登录"（无法确认是否成功）
```

---

### ⚠️ 注意事项

#### 1. 页面加载
- 某些操作需要等待页面加载完成
- 如果遇到问题，可以添加"等待 2 秒"

#### 2. 动态内容
- 对于异步加载的内容，需要等待元素出现
- 使用"等待看到 XXX 文字"

#### 3. 弹窗处理
- 如果有确认框，需要明确说明"点击确定"或"取消"

#### 4. 文件上传
- 需要提供文件的完整路径
- 示例："上传文件 /path/to/file.png"

---

## 🎯 常用指令模板

### 登录相关
```
✅ 导航到 [URL]，用 [用户名] / [密码] 登录
✅ 打开应用，用管理员账号登录
✅ 用教师账号 teacher@inspireed.com / teacher123 登录
```

### 表单操作
```
✅ 创建新[对象]：名称 [XXX]，类型 [XXX]
✅ 填写表单：字段1=[值1]，字段2=[值2]
✅ 在 [字段] 输入 [内容]
```

### 导航操作
```
✅ 点击 [按钮/链接]
✅ 进入 [页面] 页面
✅ 打开 [功能] 模块
```

### 验证操作
```
✅ 截图确认
✅ 检查是否显示 [文本]
✅ 查看控制台是否有错误
✅ 检查网络请求
```

### 组合操作
```
✅ 打开应用，登录，然后 [操作1]，[操作2]，最后截图
✅ 导航到 [页面]，执行 [操作]，等待 [结果]，验证 [内容]
```

---

## ❓ 常见问题

### Q1: 为什么操作失败了？
**A**: 可能原因：
- 页面还在加载，尝试添加"等待 2 秒"
- 元素未找到，检查页面是否正确
- 网络问题，检查服务是否启动

### Q2: 如何处理加载很慢的页面？
**A**: 使用等待指令：
```
打开页面，等待看到"欢迎"文字，然后继续操作
```

### Q3: 可以同时操作多个标签页吗？
**A**: 可以！使用标签页管理：
```
打开新标签页，访问 [URL]
切换到第一个标签页
关闭当前标签页
```

### Q4: 如何上传文件？
**A**: 提供完整路径：
```
点击上传按钮，选择文件 /Users/xxx/file.png
```

### Q5: 可以执行自定义 JavaScript 吗？
**A**: 可以！明确说明：
```
执行 JavaScript: console.log('test')
在页面执行: document.title = 'New Title'
```

### Q6: 如何调试 API 请求？
**A**: 使用网络监控：
```
打开页面，查看网络请求
显示所有失败的 API 调用
检查 /api/lessons 接口的响应
```

### Q7: 如何处理确认框？
**A**: 明确说明操作：
```
点击删除按钮，在确认框点击"确定"
点击取消按钮，关闭弹窗
```

### Q8: 页面元素找不到怎么办？
**A**: 可以：
- 让 AI 先截图看看当前状态
- 描述元素的位置："点击右上角的按钮"
- 等待页面加载完成后再操作

---

## 🚀 高级技巧

### 1. 批量测试
```
依次测试以下账号的登录：
1. admin@inspireed.com / admin123
2. teacher@inspireed.com / teacher123
3. student@inspireed.com / student123
每次登录后截图，然后登出
```

### 2. 自动化工作流
```
自动化以下工作流：
1. 登录系统
2. 创建 5 个测试课程（数学、物理、化学、生物、英语）
3. 为每个课程创建一个示例教案
4. 截图每个步骤
5. 导出结果
```

### 3. 性能测试
```
测试页面加载性能：
1. 打开页面并计时
2. 等待页面完全加载
3. 查看网络请求耗时
4. 记录控制台警告
```

### 4. UI 回归测试
```
进行 UI 回归测试：
1. 打开各个主要页面
2. 每个页面截图
3. 检查是否有样式错误
4. 验证所有链接可用
```

---

## 📚 相关资源

- [Playwright 官方文档](https://playwright.dev/)
- [InspireEd 项目文档](./README.md)
- [快速启动指南](./QUICKSTART.md)
- [开发指南](./development.md)

---

## 📝 总结

### 记住三点：

1. **用自然语言描述**：不需要了解技术细节
2. **分步骤操作**：复杂任务拆分成小步骤
3. **验证结果**：操作后截图或检查

### 常用指令格式：

```
导航到 [URL]，用 [账号] / [密码] 登录
打开 [页面]，执行 [操作]，然后 [验证]
创建 [对象]：[属性1]=[值1]，[属性2]=[值2]
```

---

**祝你使用愉快！** 🎉

有问题随时询问 AI，它会帮你解决！

